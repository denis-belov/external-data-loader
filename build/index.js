!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["external-data-loader"]=t():e["external-data-loader"]=t()}(self,(function(){return e={579:e=>{e.exports=class{constructor(){this.content={},this.length=null,this.current=null,this.loaded=null,this.progress=null,this.rejectOnError=!1}getXhr({name:e,type:t,source:o,headers:s,middleware:r},n,a){const l=new XMLHttpRequest;return l.lastLoaded=0,l.image=null,l.lengthComputable=!0,l.loaded=0,o.constructor===ArrayBuffer?(l.image=new Image,l.image.onload=()=>this.onload(l,e,r,n),l.image.src=window.URL.createObjectURL(new Blob([o]))):(l.open("GET",o,!0),"image"===t?(l.responseType="arraybuffer",l.image=new Image):"document"===t?(l.responseType=t,l.overrideMimeType("text/xml")):l.responseType=t,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("Content-type","text"),s&&Object.keys(s).forEach((e=>l.setRequestHeader(e,s[e]))),l.onprogress=e=>this.onprogress(l,e),l.onload=()=>{200===l.status?"image"===t?(l.image.onload=()=>this.onload(l,e,r,n),l.image.src=window.URL.createObjectURL(new Blob([l.response]))):this.onload(l,e,r,n):this.rejectOnError?a(l):this.onloadBroken(e,n)},l.onerror=e=>a(e),l.send()),l}load(e){return new Promise(((t,o)=>{if(e&&e.sources){this.length=Object.keys(e.sources).length,this.current=0,this.loaded=0,this.progress=e.progress||(()=>0),this.rejectOnError=!1;for(const s in e.sources){const r=e.sources[s];this.content[s]=this.getXhr({name:s,type:r.type||"text",source:r.source||r,headers:e.headers,middleware:r.middleware||null},t,o)}}else o(new Error("external-data-loader ERROR: NO SOURCES"))}))}onprogress(e,t){e.lengthComputable=t.lengthComputable,e.lengthComputable&&(this.loaded+=t.loaded/t.total-e.lastLoaded,e.lastLoaded=t.loaded/t.total,e.loaded=e.lastLoaded,this.progress())}onload(e,t,o,s){this.loaded+=e.lengthComputable?1-e.loaded:1,this.progress();const r=this.content[t],n=r.image||r.response||r.responseText;this.content[t]=o?o(n):n,++this.current===this.length&&(this.loaded=this.length,this.progress(),s(this.content))}onloadBroken(e,t){this.loaded++,this.progress(),this.content[e]=null,++this.current===this.length&&(this.loaded=this.length,this.progress(),t(this.content))}}}},t={},function o(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,o),n.exports}(579);var e,t}));